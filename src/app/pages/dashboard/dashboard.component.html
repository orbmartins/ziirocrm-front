<section class="md:px-8 py-10">
    <div class="w-full flex flex-col gap-6">
        <div class="w-full flex flex-col gap-6 md:grid md:grid-cols-3 md:gap-4">
            <div class="relative flex flex-col bg-clip-border rounded-xl bg-white text-gray-700 border border-zr-secondary-light">
                <div class="p-6 p-4">
                    <span class="material-symbols-outlined text-zr-primary text-4xl!">
                        handshake
                    </span>
                    <p class="block antialiased leading-normal text-inherit text-gray-600 opacity-70 mb-1">
                        Oportunidades
                    </p>
                    <h3 class="block antialiased tracking-normal font-sans text-3xl font-bold leading-snug text-blue-gray-900">
                        {{ oportunidadesCount }}
                    </h3>
                </div>
            </div>
            <div class="relative flex flex-col bg-clip-border rounded-xl bg-white text-gray-700 border border-zr-secondary-light">
                <div class="p-6 p-4">
                    <span class="material-symbols-outlined text-zr-primary text-4xl!">
                        chat
                    </span>
                    <p class="block antialiased leading-normal text-inherit text-gray-600 opacity-70 mb-1">
                        Atendimentos
                    </p>
                    <h3 class="block antialiased tracking-normal font-sans text-3xl font-bold leading-snug text-blue-gray-900">
                        {{ atendimentosCount }}
                    </h3>
                </div>
            </div>
            <div class="relative flex flex-col bg-clip-border rounded-xl bg-white text-gray-700 border border-zr-secondary-light">
                <div class="p-6 p-4">
                    <span class="material-symbols-outlined text-zr-primary text-4xl!">
                        group
                    </span>
                    <p class="block antialiased leading-normal text-inherit text-gray-600 opacity-70 mb-1">
                        Usuários
                    </p>
                    <h3 class="block antialiased tracking-normal font-sans text-3xl font-bold leading-snug text-blue-gray-900">
                        {{ usuariosCount }}
                    </h3>
                </div>
            </div>
        </div>
    </div>
    <div class="md:max-h-[55vh] h-full bg-white p-8 mt-4 rounded-xl border-2 border-zr-secondary-superlight overflow-scroll ">
        <div class="flex flex-col md:flex-row items-start md:items-end md:justify-between gap-4 mb-6">
            <h2 class="font-semibold text-2xl">Últimas Oportunidades</h2>
            <a href="/oportunidades" class="btn-primary">Ver todas</a>
        </div>
        <div class="relative flex flex-col w-full h-full text-gray-700">
            <div class="h-full pr-6 pb-6">
                <table class="w-full table-auto min-w-max text-left">
                    <thead>
                        <tr>
                            <th class="p-4 border-b border-zr-secondary bg-blue-gray-50/50">
                                <p class="block font-sans text-sm antialiased font-semibold leading-none text-black">
                                    Nome
                                </p>
                            </th>
                            <th class="p-4 border-b border-zr-secondary bg-blue-gray-50/50">
                                <p class="block font-sans text-sm antialiased font-semibold leading-none text-black">
                                    Email
                                </p>
                            </th>
                            <th class="p-4 border-b border-zr-secondary bg-blue-gray-50/50">
                                <p class="block font-sans text-sm antialiased font-semibold leading-none text-black">
                                    Telefone
                                </p>
                            </th>
                            <th class="p-4 border-b border-zr-secondary bg-blue-gray-50/50">
                                <p class="block font-sans text-sm antialiased font-semibold leading-none text-black">
                                    Status
                                </p>
                            </th>
                            <th class="p-4 border-b border-zr-secondary bg-blue-gray-50/50">
                                <p class="block font-sans text-sm antialiased font-semibold leading-none text-black">
                                    Data de Criação
                                </p>
                            </th>
                            <th class="p-4 border-b border-zr-secondary bg-blue-gray-50/50">
                                <p class="block font-sans text-sm antialiased font-semibold leading-none text-black">
                                    Atendimentos
                                </p>
                            </th>
                            <th class="p-4 border-b border-zr-secondary bg-blue-gray-50/50">
                                <p class="block font-sans text-sm antialiased font-semibold leading-none text-black text-right">
                                    Ações
                                </p>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngIf="error">
                            <td class="px-4 py-2 border-b border-zr-secondary-light" colspan="7">
                                <p class="block font-sans text-sm antialiased font-normal leading-normal text-red-400">{{ error }}</p>
                            </td>
                        </tr>
                        <tr *ngIf="oportunidades.length == 0">
                            <td class="px-4 py-2 border-b border-zr-secondary-light" colspan="7">
                                <p class="block font-sans text-sm antialiased font-normal leading-normal text-black">Ainda não temos oportunidades cadastradas.</p>
                            </td>
                        </tr>
                        <tr *ngFor="let oportunidade of oportunidades | slice:0:6" class="hover:bg-zr-secondary-superlight transition-all duration-300">
                            <td class="px-4 py-1 border-b border-zr-secondary-light">
                                <div class="flex items-center gap-3">
                                    <div class="flex flex-col">
                                        <p class="block font-sans text-sm antialiased font-normal leading-normal text-blue-gray-900">
                                            {{ oportunidade.nome }}
                                        </p>
                                    </div>
                                </div>
                            </td>
                            <td class="px-4 py-1 border-b border-zr-secondary-light">
                                <div class="flex items-center gap-3">
                                    <div class="flex flex-col">
                                        <p class="block font-sans text-sm antialiased font-normal leading-normal text-blue-gray-900">
                                            {{ oportunidade.email }}
                                        </p>
                                    </div>
                                </div>
                            </td>
                            <td class="px-4 py-1 border-b border-zr-secondary-light">
                                <div class="flex items-center gap-3">
                                    <div class="flex flex-col">
                                        <p class="block font-sans text-sm antialiased font-normal leading-normal text-blue-gray-900">
                                            {{ oportunidade.telefone }}
                                        </p>
                                    </div>
                                </div>
                            </td>
                            <td class="px-4 py-1 border-b border-zr-secondary-light">
                                <div class="flex flex-col">
                                    <p class="block font-sans text-sm antialiased font-normal leading-normal text-blue-gray-900">
                                        {{ oportunidade.status }}
                                    </p>
                                </div>
                            </td>
                            <td class="px-4 py-1 border-b border-zr-secondary-light">
                                <div class="flex flex-col">
                                    <p class="block font-sans text-sm antialiased font-normal leading-normal text-blue-gray-900">
                                        {{ oportunidade.dataCriacao | date:'dd/MM/yyyy HH\'h\'mm' }}
                                    </p>
                                </div>
                            </td>
                            <td class="px-4 py-1 border-b border-zr-secondary-light">
                                <div class="flex flex-col">
                                    <p class="block font-sans text-sm antialiased font-normal leading-normal text-blue-gray-900">
                                        {{ oportunidade.atendimentos?.length || 0 }}
                                    </p>
                                </div>
                            </td>
                            <td class="px-4 py-1 border-b border-zr-secondary-light">
                                <div class="flex items-start justify-end gap-2">
                                    <button title="Editar" (click)="editar(oportunidade.id)" class="cursor-pointer relative h-[30px] w-[30px] select-none rounded-full text-center align-middle font-sans text-xs font-medium uppercase text-gray-900 transition-all hover:text-zr-secondary hover:bg-zr-primary active:zr-primary disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none" type="button">
                                        <span class="block w-full h-full">
                                            <span class="material-symbols-outlined text-[18px]! leading-[22px]! w-full h-full p-1">
                                                edit
                                            </span>
                                        </span>
                                    </button>
                                    <button title="Excluir" class="hidden cursor-pointer relative h-[30px] w-[30px] select-none rounded-full text-center align-middle font-sans text-xs font-medium uppercase text-gray-900 transition-all hover:text-zr-secondary hover:bg-zr-primary active:zr-primary disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none" type="button">
                                        <span class="block w-full h-full">
                                            <span class="material-symbols-outlined text-[18px]! leading-[22px]! w-full h-full p-1">
                                                delete
                                            </span>
                                        </span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</section>